<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:InventoryMobile.ViewModels"
             xmlns:dtos="clr-namespace:Inventory.Core.Application.DTOs;assembly=Inventory.Core.Application"
             x:Class="InventoryMobile.MainPage"
             x:DataType="viewModels:MainViewModel"
             Title="Inventory">

    <Grid RowDefinitions="Auto, *">

        <Button Grid.Row="0"
                Text="Refresh"
                Command="{Binding LoadProductsCommand}"
                Margin="10"/>

        <CollectionView Grid.Row="1"
                        ItemsSource="{Binding Products}">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="{x:Type dtos:ProductDto}">
                    <Frame Padding="10" Margin="10" CornerRadius="5" BorderColor="LightGray">
                        <VerticalStackLayout>
                            <Label Text="{Binding Name}" FontSize="Large" FontAttributes="Bold" />
                            <Label Text="{Binding CategoryName}" FontSize="Small" />
                            <Label Text="{Binding VariantsDisplay}" FontSize="Small" TextColor="Gray" />
                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <ActivityIndicator Grid.Row="1"
                           IsRunning="{Binding IsLoading}"
                           IsVisible="{Binding IsLoading}"
                           HorizontalOptions="Center"
                           VerticalOptions="Center" />
    </Grid>

</ContentPage>